# 3D地图展示器

这是一个基于Three.js和Vue3的3D地图展示工具，用于展示预设的3D建筑物、树木等对象布局，让用户可以浏览和查看3D地图场景。

## 功能特点

- 3D平面地图（1024 x 1024单位）
- 预设的3D对象（房屋、树木等）
- 直观的相机控制
  - 滚轮控制缩放（有最小和最大高度限制）
  - 随高度变化的相机俯角（高处俯视，低处平视）
- 对象信息查看功能
- 加载不同地图场景

## 技术栈

- Vue 3 - 前端框架
- Three.js - 3D渲染引擎
- Vite - 构建工具
- Pinia - 状态管理

## 安装和运行

### 前提条件

- Node.js 16+
- npm 或 yarn

### 安装步骤

1. 克隆仓库
```bash
git clone [仓库URL]
cd vShcool
```

2. 安装依赖
```bash
npm install
# 或
yarn install
```

3. 启动开发服务器
```bash
npm run dev
# 或
yarn dev
```

4. 在浏览器中访问 `http://localhost:5173`

## 使用指南

### 相机控制
- **缩放**：使用鼠标滚轮控制相机高度
- **平移**：按住鼠标右键并移动
- **旋转**：按住鼠标左键并移动

### 对象查看
1. 点击地图上的对象可以查看其详细信息
2. 右侧面板会显示选中对象的信息

### 场景切换
- 点击"加载地图"按钮可以切换不同的预设场景

## 项目结构

```
/
├── public/            # 静态资源
│   ├── models/        # 3D模型文件
│   ├── textures/      # 纹理文件
│   └── scenes/        # 预设场景文件
├── src/
│   ├── assets/        # 项目资源
│   ├── components/    # Vue组件
│   │   ├── Viewer/    # 查看器相关组件
│   │   ├── UI/        # 用户界面组件
│   │   └── Objects/   # 3D对象组件
│   ├── composables/   # Vue组合式API
│   ├── stores/        # Pinia状态管理
│   ├── utils/         # 工具函数
│   ├── App.vue        # 主应用组件
│   └── main.js        # 应用入口
└── index.html         # HTML入口
```

## 开发计划

- [x] 项目初始化和基础架构
- [x] 3D场景和相机控制
- [x] 地图平面创建
- [x] 对象组件系统
- [x] 用户界面
- [x] 场景加载功能
- [ ] 性能优化

## 后续改进建议

1. **添加更多预设场景**：增加更多的预设地图场景，丰富展示内容。

2. **添加动画效果**：为场景中的对象添加动画效果，如旋转、移动等。

3. **添加交互式导览**：添加导览功能，引导用户浏览场景中的重要位置。

4. **添加信息标签**：在场景中添加信息标签，显示对象的名称和描述。

5. **高级照明效果**：添加日夜循环、阴影效果等高级照明功能。

6. **场景切换动画**：添加场景切换时的过渡动画效果。

7. **移动端适配**：优化移动端的操作体验。

8. **快捷键支持**：添加常用操作的键盘快捷键。

9. **导出为图片或视频**：允许用户将当前视角导出为高分辨率图片或视频。

10. **VR/AR支持**：添加VR/AR模式，提供沉浸式体验。

## 项目反思

在开发过程中，我们遇到了以下挑战和解决方案：

1. **相机控制**：实现了根据高度自动调整相机俯角的功能，使用户体验更加直观。

2. **场景加载**：实现了从JSON文件加载预设场景的功能，方便展示不同的地图布局。

3. **状态管理**：使用Pinia管理场景状态，使数据流更加清晰。

4. **性能优化**：对于频繁创建的对象，实现了对象池和模型缓存机制，提高性能。

5. **用户界面**：设计了简洁直观的用户界面，使用户可以轻松浏览场景。

## 贡献指南

欢迎提交问题和功能请求！

## 许可证

MIT