<div class="row mb-4">
  <div class="col">
    <h1><%= isEdit ? '编辑' : '添加' %>建筑物</h1>
    <p>请填写下面的表单<%= isEdit ? '编辑' : '添加' %>建筑物到虚拟校园中。</p>
  </div>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <form action="<%= isEdit ? `/buildings/${building.id}` : '/buildings' %>" method="POST">
          <div class="mb-3">
            <label for="name" class="form-label">名称</label>
            <input type="text" class="form-control" id="name" name="name" value="<%= building ? building.name : '' %>" required>
          </div>
          
          <div class="mb-3">
            <label for="type" class="form-label">类型</label>
            <select class="form-select" id="type" name="type" required>
              <option value="">-- 请选择建筑类型 --</option>
              <option value="house" <%= building && building.type === 'house' ? 'selected' : '' %>>住宅建筑</option>
              <option value="classroom" <%= building && building.type === 'classroom' ? 'selected' : '' %>>教学楼</option>
              <option value="laboratory" <%= building && building.type === 'laboratory' ? 'selected' : '' %>>实验室</option>
              <option value="gymnasium" <%= building && building.type === 'gymnasium' ? 'selected' : '' %>>体育馆</option>
              <option value="building" <%= building && building.type === 'building' ? 'selected' : '' %>>普通建筑</option>
              <option value="tree" <%= building && building.type === 'tree' ? 'selected' : '' %>>树木</option>
              <option value="playground" <%= building && building.type === 'playground' ? 'selected' : '' %>>操场</option>
            </select>
          </div>
          
          <div class="mb-3">
            <label for="description" class="form-label">描述</label>
            <textarea class="form-control" id="description" name="description" rows="3" required><%= building ? building.description : '' %></textarea>
          </div>
          
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="positionX" class="form-label">位置 X</label>
              <input type="number" step="0.1" class="form-control" id="positionX" name="positionX" value="<%= building ? building.position.x : '0' %>" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="positionY" class="form-label">位置 Y</label>
              <input type="number" step="0.1" class="form-control" id="positionY" name="positionY" value="<%= building ? building.position.y : '0' %>" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="positionZ" class="form-label">位置 Z</label>
              <input type="number" step="0.1" class="form-control" id="positionZ" name="positionZ" value="<%= building ? building.position.z : '0' %>" required>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="rotation" class="form-label">Y轴旋转角度（度）</label>
              <input type="number" step="1" class="form-control" id="rotation" name="rotation" value="<%= building ? (building.rotation.y || 0) : '0' %>" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="scale" class="form-label">整体缩放比例</label>
              <input type="number" step="0.1" min="0.1" class="form-control" id="scale" name="scale" value="<%= building ? (building.scale.x || 1) : '1' %>" required>
            </div>
          </div>
          
          <div class="mt-4">
            <button type="submit" class="btn btn-primary"><%= isEdit ? '更新' : '添加' %>建筑物</button>
            <a href="/" class="btn btn-secondary ms-2">取消</a>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card">
      <div class="card-header bg-info text-white">
        <h5 class="card-title mb-0">提示</h5>
      </div>
      <div class="card-body">
        <h6>坐标系统说明</h6>
        <p>在Three.js坐标系统中：</p>
        <ul>
          <li><strong>X轴</strong> - 从左到右</li>
          <li><strong>Y轴</strong> - 从下到上</li>
          <li><strong>Z轴</strong> - 从后到前</li>
        </ul>
        
        <h6>旋转</h6>
        <p>旋转值以度为单位，目前仅支持绕Y轴旋转。0度表示建筑物面向Z轴正方向。</p>
        
        <h6>缩放</h6>
        <p>缩放值控制建筑物的整体大小。1表示原始大小，大于1表示放大，小于1表示缩小。</p>
        
        <h6>颜色和外观</h6>
        <p>每种建筑类型都有默认的样式和颜色设置，目前通过后台自动设置。</p>
      </div>
    </div>
  </div>
</div> 